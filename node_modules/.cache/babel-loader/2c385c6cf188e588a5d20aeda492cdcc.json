{"ast":null,"code":"var _jsxFileName = \"/home/gustazacchi/gestao-de-habitos/src/pages/Login/index.js\",\n    _s = $RefreshSig$();\n\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\nimport Input from \"../../components/Input\";\nimport { Container, AnimationContainer, Button } from \"./styles\";\nimport { FiUser, FiLock } from \"react-icons/fi\";\nimport * as yup from 'yup';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport api from \"../../services/api\";\nimport { toast } from 'react-toastify';\nimport { HabitsContext } from \"../../providers/habits\";\nimport { useContext } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  var _errors$username, _errors$password;\n\n  const {\n    setToken\n  } = useContext(HabitsContext);\n  const forSchema = yup.object().shape({\n    username: yup.string().required(\"Username Obrigatótio\"),\n    password: yup.string().required(\"Campo Obrigatório\")\n  });\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(forSchema)\n  });\n  const history = useHistory();\n\n  const handleSubmitFunction = data => {\n    api.post(\"/sessions/\", data).then(response => {\n      const {\n        access\n      } = response.data;\n      localStorage.setItem(\"@GestãoDeHábitos:access\", JSON.stringify(access));\n      setToken(access);\n      return history.push('/dashboard');\n    }).catch(err => toast.error('Erro ao logar, Login e/ou senha inválidos'));\n  };\n\n  const token = JSON.parse(localStorage.getItem(\"@GestãoDeHábitos:access\")) || \"\";\n\n  if (token) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 14\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(AnimationContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(handleSubmitFunction),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          register: register,\n          name: \"username\",\n          icon: FiUser,\n          placeholder: \"Your Username\",\n          error: (_errors$username = errors.username) === null || _errors$username === void 0 ? void 0 : _errors$username.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          register: register,\n          name: \"password\",\n          icon: FiLock,\n          placeholder: \"Your Password\",\n          type: \"password\",\n          error: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          size: \"100%\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Don't have an account? Create a Habits \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup\",\n          children: \"Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 57\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"UHEcIhdc4PCv+75v/cwEk5rxxww=\", false, function () {\n  return [useForm, useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/gustazacchi/gestao-de-habitos/src/pages/Login/index.js"],"names":["Link","Redirect","useHistory","Input","Container","AnimationContainer","Button","FiUser","FiLock","yup","useForm","yupResolver","api","toast","HabitsContext","useContext","Login","setToken","forSchema","object","shape","username","string","required","password","register","handleSubmit","formState","errors","resolver","history","handleSubmitFunction","data","post","then","response","access","localStorage","setItem","JSON","stringify","push","catch","err","error","token","parse","getItem","message"],"mappings":"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","sourcesContent":["import{Link,Redirect,useHistory} from \"react-router-dom\"\nimport Input from \"../../components/Input\"\nimport {Container,AnimationContainer, Button} from \"./styles\"\nimport {FiUser, FiLock} from \"react-icons/fi\"\nimport * as yup from 'yup';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport api from \"../../services/api\"\nimport{ toast } from 'react-toastify'\nimport { HabitsContext } from \"../../providers/habits\";\nimport { useContext } from 'react';\n\nconst Login = () => {\n    const { setToken } = useContext(HabitsContext)\n\n    const forSchema = yup.object().shape({\n        username: yup.string().required(\"Username Obrigatótio\"),\n        password: yup.string().required(\"Campo Obrigatório\"),\n      })\n    const{register, handleSubmit, formState:{errors}} = useForm({\n        resolver: yupResolver(forSchema)\n    });\n    const history = useHistory()\n\n\n    const handleSubmitFunction = (data) => {\n        api.post(\"/sessions/\", data)\n        .then((response)=> {\n            const {access} = response.data\n            localStorage.setItem(\"@GestãoDeHábitos:access\", JSON.stringify(access))\n            setToken(access)\n            return history.push('/dashboard')\n        })\n        .catch((err) => toast.error('Erro ao logar, Login e/ou senha inválidos'))\n    }\n    const token = JSON.parse(localStorage.getItem(\"@GestãoDeHábitos:access\")) || \"\";\n    if(token){\n      return <Redirect to=\"/dashboard\"/>\n    }\n\n    return(\n        <Container>\n            <AnimationContainer>\n              <form onSubmit={handleSubmit(handleSubmitFunction)}>\n                    <h1>Login</h1>\n                    <Input register={register} name=\"username\" icon={FiUser} placeholder=\"Your Username\" error={errors.username?.message}/>\n                    <Input register={register} name=\"password\" icon={FiLock} placeholder=\"Your Password\" type=\"password\" error={errors.password?.message}/>\n                    <Button type=\"submit\" size={\"100%\"}>Login</Button>     \n              </form>\n              <p>Don't have an account? Create a Habits <Link to=\"/signup\">Account</Link></p>\n            </AnimationContainer>\n        </Container>\n    )\n}\nexport default Login"]},"metadata":{},"sourceType":"module"}