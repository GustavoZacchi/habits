{"ast":null,"code":"var _jsxFileName = \"/home/gustazacchi/gestao-de-habitos/src/pages/SignUp/index.js\",\n    _s = $RefreshSig$();\n\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\nimport Input from \"../../components/Input\";\nimport { Container, AnimationContainer, Button } from \"./styles\";\nimport { FiVoicemail, FiUser, FiLock } from \"react-icons/fi\";\nimport * as yup from 'yup';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport api from \"../../services/api\";\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SignUp = () => {\n  _s();\n\n  var _errors$username, _errors$email, _errors$password;\n\n  const forSchema = yup.object().shape({\n    username: yup.string().required(\"Username Obrigatótio\"),\n    email: yup.string().required(\"Email Obrigatótio\").email(\"Email Inválido\"),\n    password: yup.string().matches(/^((?=.*[!@#$%^&*()\\-_=+{};:,<.>]){1})(?=.*\\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/, \"Senha deve conter ao menos uma letra maiúscula, uma minúscula, um número e um caracter especial!\").required(\"Senha obrigatória\")\n  });\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(forSchema)\n  });\n  const history = useHistory();\n\n  const handleSubmitFunction = data => {\n    api.post(\"/users/\", data).then(response => {\n      const {\n        refresh\n      } = response.data;\n      localStorage.setItem(\"@GestãoDeHábitos:refresh\", JSON.stringify(refresh));\n      return history.push('/login');\n    }).catch(err => toast.error('Erro ao criar User'));\n  };\n\n  const token = localStorage.getItem(\"@GestãoDeHábitos:access\") || false;\n\n  if (token) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 14\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(AnimationContainer, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(handleSubmitFunction),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"SignUp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          register: register,\n          name: \"username\",\n          icon: FiUser,\n          placeholder: \"Your Username\",\n          error: (_errors$username = errors.username) === null || _errors$username === void 0 ? void 0 : _errors$username.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          register: register,\n          name: \"email\",\n          icon: FiVoicemail,\n          placeholder: \"Your Email\",\n          error: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          register: register,\n          name: \"password\",\n          icon: FiLock,\n          placeholder: \"Your Password\",\n          type: \"password\",\n          error: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          size: \"100%\",\n          children: \"SignUp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Already have an account? Login to your \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 63\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SignUp, \"rpot/AuNfVcJKpyBhTrvoGz7khU=\", false, function () {\n  return [useForm, useHistory];\n});\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["/home/gustazacchi/gestao-de-habitos/src/pages/SignUp/index.js"],"names":["Link","Redirect","useHistory","Input","Container","AnimationContainer","Button","FiVoicemail","FiUser","FiLock","yup","useForm","yupResolver","api","toast","SignUp","forSchema","object","shape","username","string","required","email","password","matches","register","handleSubmit","formState","errors","resolver","history","handleSubmitFunction","data","post","then","response","refresh","localStorage","setItem","JSON","stringify","push","catch","err","error","token","getItem","message"],"mappings":"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","sourcesContent":["import{Link,Redirect,useHistory} from \"react-router-dom\"\nimport Input from \"../../components/Input\"\nimport {Container,AnimationContainer, Button} from \"./styles\"\nimport { FiVoicemail,FiUser, FiLock} from \"react-icons/fi\"\nimport * as yup from 'yup';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport api from \"../../services/api\"\nimport{ toast } from 'react-toastify'\n\nconst SignUp = () => {\n    const forSchema = yup.object().shape({\n        username: yup.string().required(\"Username Obrigatótio\"),\n        email: yup.string().required(\"Email Obrigatótio\").email(\"Email Inválido\"),\n        password: yup.string().matches(\n            /^((?=.*[!@#$%^&*()\\-_=+{};:,<.>]){1})(?=.*\\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,\n            \"Senha deve conter ao menos uma letra maiúscula, uma minúscula, um número e um caracter especial!\"\n          ).required(\"Senha obrigatória\"),\n      })\n    const{register, handleSubmit, formState:{errors}} = useForm({\n        resolver: yupResolver(forSchema)\n    });\n    const history = useHistory()\n\n\n    const handleSubmitFunction = (data) => {\n        api.post(\"/users/\", data)\n        .then((response)=> {\n            const {refresh} = response.data\n            localStorage.setItem(\"@GestãoDeHábitos:refresh\", JSON.stringify(refresh))\n            return history.push('/login')\n        })\n        .catch((err) => toast.error('Erro ao criar User'))\n    }\n    const token = localStorage.getItem(\"@GestãoDeHábitos:access\") || false;\n    if(token){\n      return <Redirect to=\"/dashboard\"/>\n    }\n\n    return(\n        <Container>\n            <AnimationContainer>\n              <form onSubmit={handleSubmit(handleSubmitFunction)}>\n                    <h1>SignUp</h1>\n                    <Input register={register} name=\"username\" icon={FiUser} placeholder=\"Your Username\" error={errors.username?.message}/>\n                    <Input register={register} name=\"email\" icon={FiVoicemail} placeholder=\"Your Email\" error={errors.email?.message}/>\n                    <Input register={register} name=\"password\" icon={FiLock} placeholder=\"Your Password\" type=\"password\" error={errors.password?.message}/>\n                    <Button type=\"submit\" size={\"100%\"}>SignUp</Button>\n                    <p>Already have an account? Login to your <Link to=\"/login\">Account</Link></p>\n              </form>\n            </AnimationContainer>\n        </Container>\n    )\n}\nexport default SignUp"]},"metadata":{},"sourceType":"module"}